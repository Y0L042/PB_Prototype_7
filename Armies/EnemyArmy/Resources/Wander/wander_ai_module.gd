extends BaseAIModule

class_name WanderAIModule


#---------------------------------------------------------------------------------------------------#
# Private Variables
#---------------------------------------------------------------------------------------------------#
var enemy_army: Variant = null



#---------------------------------------------------------------------------------------------------#
# Public Variables
#---------------------------------------------------------------------------------------------------#
@export var wander_area: Area2D

#---------------------------------------------------------------------------------------------------#
# SetGet
#---------------------------------------------------------------------------------------------------#


#---------------------------------------------------------------------------------------------------#
# Private Functions
#---------------------------------------------------------------------------------------------------#
#-------------------------------------------------------------------------------
# Initialization
#-------------------------------------------------------------------------------
func _connect_to_parent_signals():
	_parent.army_sight_area.area_entered.connect(_on_army_sight_area_entered)

#-------------------------------------------------------------------------------
# Runtime
#-------------------------------------------------------------------------------


#-------------------------------------------------------------------------------
# Movement Functions
#-------------------------------------------------------------------------------
func _move_army(target: Vector2):
	_parent.move_army()

#-------------------------------------------------------------------------------
# Events
#-------------------------------------------------------------------------------
func _on_army_sight_area_entered(area: Area2D) -> void:
	print("army spotted")
	if area.get_parent().is_in_group()
#-------------------------------------------------------------------------------
# Tools
#-------------------------------------------------------------------------------


#---------------------------------------------------------------------------------------------------#
# Public Functions
#---------------------------------------------------------------------------------------------------#
#-------------------------------------------------------------------------------
# Initialize
#-------------------------------------------------------------------------------
func ai_module_ready():
	_connect_to_parent_signals()
	print("Wander AI ready ")



#-------------------------------------------------------------------------------
# Runtime
#-------------------------------------------------------------------------------
func ai_module_physics_process(_delta: float):
	if enemy_army == null:
		_move_army(_parent.wander())
	else:
		var enemy_army_target: Vector2 = _parent.get_army_position().direction_to(enemy_army.get_army_position())
		_move_army(_parent)
#---------------------------------------------------------------------------------------------------#
# %debug%
#---------------------------------------------------------------------------------------------------#
