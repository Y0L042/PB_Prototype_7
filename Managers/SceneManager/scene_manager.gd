extends Node



#---------------------------------------------------------------------------------------------------#
# Private Variables
#---------------------------------------------------------------------------------------------------#
@onready var _tree_root = get_tree().get_root()


var _root_manager : set = set_root_manager
var _prev_root_manager

#---------------------------------------------------------------------------------------------------#
# Public Variables
#---------------------------------------------------------------------------------------------------#

#---------------------------------------------------------------------------------------------------#
# SetGet
#---------------------------------------------------------------------------------------------------#
func set_root_manager(new_root_manager):
	_prev_root_manager = _root_manager
	_root_manager = new_root_manager

#---------------------------------------------------------------------------------------------------#
# Private Functions
#---------------------------------------------------------------------------------------------------#
#-------------------------------------------------------------------------------
# Initialization
#-------------------------------------------------------------------------------
func _ready() -> void:
	call_deferred("_spawn_root_manager", SceneLib.MainMenuManager)




#-------------------------------------------------------------------------------
# Spawn Managers
#-------------------------------------------------------------------------------
func _switch_root_manager(new_manager):
	_spawn_root_manager(new_manager)
	_despawn_root_manager()

func _despawn_root_manager():
	_root_manager.queue_free()

func _spawn_root_manager(new_manager):
	_root_manager = SceneLib.spawn_child(new_manager, _tree_root)


#-------------------------------------------------------------------------------
# Tools
#-------------------------------------------------------------------------------


#---------------------------------------------------------------------------------------------------#
# Public Functions
#---------------------------------------------------------------------------------------------------#
#-------------------------------------------------------------------------------
# Tools
#-------------------------------------------------------------------------------
func spawn_scene(new_scene):
	SceneLib.spawn_child(new_scene, _root_manager)

#---------------------------------------------------------------------------------------------------#
# %debug%
#---------------------------------------------------------------------------------------------------#
